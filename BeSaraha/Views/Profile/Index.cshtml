@model UserAndMessage
@{
    ViewData["Title"] = "Profile";
}
<div class="container text-light justify-content-center align-items-center text-center mt-5">
    <div class="row">
        <div class="col">
            <div class="container">
                <div class="card bg-opacity-25 bg-dark rounded-5 text-light container">
                        <hr/>
                    <div class="card-img-top m-auto container">
                        <p>

                        <img id="profileimage" src="https://mdbcdn.b-cdn.net/img/new/avatars/1.webp" style="height:130px;width:130px;margin-bottom:1rem;"/>
                        </p>
                        <p>
                        <span class="h5 my-5 bg-danger bg-opacity-10 d-inline p-2 rounded-3">@Model.user.Firstname @Model.user.Lastname</span>
                        </p>
                    </div>
                    <div class="card-body">
                        <hr/>
                        <div id="profileinfo" class="row">
                            <div class="col">
                                Followers: @Model.user.followersCount
                            </div>
                            <div class="col">
                                Messages: @Model.user.messagesCount
                            </div>
                            <div class="col">
                                Following: @Model.user.followingCount
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row my-5 container ms-auto me-auto" style="height:15rem;">
        <div class="bg-opacity-25 bg-dark rounded text-light">
            <span class="d-block mt-4 mb-0 h5">Message @Model.user.Firstname</span>
           <form class="form" method="post">
               <label for="messagecontent"></label>
               <hr class="my-0" style="opacity:0;"/>
                @{
                    string msgtext = "";
                }
                <textarea id="message" name="msgtext" placeholder="Type a message for @Model.user.Firstname">@msgtext</textarea>
                <hr class="opacity-0 my-0"/>
                <button id="messagebutton" class="btn btn-primary w-50 my-3 borderhover" asp-controller="Profile" asp-action="SendMessage" asp-route-userid="@Model.user.Id";
}" style="background-color: var(--primary);outline:none;border:none;">Send</button>
           </form>
        </div>
    </div>
</div>
<script type="text/javascript">
    const message = document.getElementById("message");
    message.style.cssText = `height: ${message.scrollHeight*2}px; overflow-y:hidden;width:40rem;border-color: var(--primary);outline-color:var(--primary);`;

    message.addEventListener("input",function() {
        this.style.height = "auto";
        this.style.height = `${this.scrollHeight*1.01}px`;
    });

</script>

